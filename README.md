# Portfolio Analysis Project

## Архитектура решения

Проект состоит из следующих компонентов:

- **portfolio_analysis.py**  
  Основной модуль для загрузки и подготовки данных портфеля, расчёта стоимости и доходности, а также визуализации распределения доходности.

- **bond_utils.py**  
  Утилиты для работы с облигациями: загрузка данных, вычисление доходности к погашению (YTM), анализ чувствительности YTM к цене.

- **hypothesis_test.py**  
  Функция для статистической проверки гипотез о равенстве средних и дисперсий доходностей двух выбранных акций.

- **cli.py**  
  Консольный интерфейс для запуска разных видов анализа: анализ портфеля, построение графиков, анализ облигаций и проверка гипотез.

- **Тесты (папка Tests)**  
  Модульные тесты для автоматической проверки корректности функций, включая тесты для проверки гипотез.

---

## Что и как было реализовано

- **Загрузка и подготовка данных:**  
  Из базы SQLite загружаются таблицы с данными о портфеле, ценах и ценных бумагах. Данные объединяются и дополняются валютными курсами для вычисления стоимости в USD.

- **Расчёт доходности портфеля:**  
  Вычисляется стоимость позиции по каждой ценной бумаге, рассчитывается доходность (pct_change) с очисткой аномалий и ограничением экстремальных значений (клиппинг).

- **Анализ облигаций:**  
  Загружаются данные по облигациям, вычисляется доходность к погашению (YTM) по всем облигациям с учётом графика платежей.

- **Построение графиков:**  
  Визуализация распределения доходности портфеля с нанесением VaR и CVaR.

- **Проверка статистических гипотез:**  
  Тестируются гипотезы о равенстве средних и дисперсий доходностей двух выбранных акций. Реализован набор модульных тестов с искусственными данными для автоматической проверки.

- **Консольный интерфейс (CLI):**  
  Удобный запуск анализа из командной строки с выбором нужной команды (анализ портфеля, графики, анализ облигаций, тестирование гипотез).
